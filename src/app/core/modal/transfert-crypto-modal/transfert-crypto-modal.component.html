<div class="container">
  <div [ngSwitch]="currentPage">
    <div *ngSwitchCase="0">
      <div class="container">
        <div class="row mx-0 my-3">
          <span class="text-danger">Be careful, make sure you have the right address. No refund after
            confirmation of the transfer.</span>
        </div>
        <div class="row mx-0">
          <table class="table">
            <tbody>
              <tr>
                <th scope="row">Your Password</th>
                <td><input autocomplete="off" [(ngModel)]="password" type="password" class="w-100 form-control"
                    [placeholder]="'password'"></td>
              </tr>
              <tr>
                <th scope="row">Address to send</th>
                <td><input [(ngModel)]="addressToSend" type="text" class="w-100 form-control"
                    [placeholder]="placeHolderAdress"></td>
              </tr>
              <tr>
                <th scope="row">Amount</th>
                <td>
                  <div class="input-group row mx-0">
                    <div class="input-group-prepend">
                      <span class="input-group-text" id="basic-addon1">{{currencyChoosed}}</span>
                    </div>
                    <input [(ngModel)]="amountCryptoChoosed" type="number" min="0" (ngModelChange)="updateAmount()"
                      class="form-control" aria-describedby="basic-addon1" [ngClass]="{'is-invalid': amountLimit < 0}">
                    <button (click)="setMaxAccount()" class="btn btn-outline-secondary btn-max" type="button"
                      id="button-addon2">Max</button>
                  </div>
                  <div class="row mx-0" *ngIf="amountLimit < 0">
                    <h5 class="text-danger">Not enough</h5>
                  </div>
                </td>
              </tr>
              <tr>
                <th scope="row">Fees (3%)</th>
                <td>{{getNumberFees()}} {{currencyChoosed}}</td>
              </tr>
              <tr>
                <th scope="row">{{'CORE.Total'|translate}}</th>
                <td>{{getTotalInCrypto()}} ETH</td>
              </tr>
              <tr class="bg-grey">
                <th scope="row">Total in USD</th>
                <td> {{getAmountInUsd()}} $USD ({{ data.transfertAccount.currentTime | date:'medium' }})</td>
              </tr>
            </tbody>
          </table>
        </div>
        <div class="row mx-0 d-flex justify-content-end">
          <button (click)="closeModal()" class="btn btn-danger mx-2">
            {{'CORE.Cancel'|translate}}
          </button>
          <button (click)="incompletMessage()"
            *ngIf="(amountCryptoChoosed == 0) || (amountLimit < 0) || (addressToSend == null)"
            class="btn btn-secondary mx-2">
            {{'CORE.Next'|translate}}
          </button>
          <button *ngIf="(amountCryptoChoosed !== 0) && (amountLimit >= 0) && (addressToSend !== null)"
            class="btn btn-primary mx-2" (click)="nextPage(1)">
            {{'CORE.Next'|translate}}
          </button>
        </div>
      </div>
    </div>
    <div *ngSwitchCase="1">
      <div class="container">
        <div class="row mx-0 mb-3">
          <div class="mx-auto">
            <h3>{{'CORE.Receipt'|translate}}</h3>
          </div>
        </div>
        <div class="row mx-0">
          <table class="table">
            <tbody>
              <tr>
                <th scope="row">Adress to send</th>
                <td>{{addressToSend}}</td>
              </tr>
              <tr>
                <th scope="row">Amount</th>
                <td>{{amountCryptoChoosed.toFixed(6)}} {{currencyChoosed}}</td>
              </tr>
              <tr>
                <th scope="row">Admin Fees (3%)</th>
                <td>{{getNumberFees()}} {{currencyChoosed}}</td>
              </tr>
              <tr>
                <th scope="row">Amount to transfert</th>
                <td>{{getTotalInCrypto()}} ETH</td>
              </tr>
              <tr class="bg-grey">
                <th scope="row">Total in USD</th>
                <td> {{getAmountInUsd()}} $USD ({{ data.transfertAccount.currentTime | date:'medium' }})</td>
              </tr>
            </tbody>
          </table>
          <span>You are going to transfert to this adresse. Are you sure ? The administration will confirm the
            transaction in a 24h delay. <span class="text-danger">This operation is irreversible</span>
          </span>
        </div>
        <div class="row mx-0 d-flex justify-content-end">
          <button class="btn btn-secondary mx-2" (click)="previousPage()">{{'CORE.Back'|translate}}</button>
          <button class="btn btn-primary mx-2" (click)="nextPage(2)">{{'CORE.Next'|translate}}</button>
        </div>
      </div>
    </div>
    <div *ngSwitchCase="2">
      <div class="container">
        <!-- Loading Animations -->
        <div *ngIf="loadingReponse" class="row mx-0 container-loading">
          <div class="loader m-auto">Loading...</div>
        </div>
        <!-- Error Response -->
        <div *ngIf="errorResponse" class="row mx-0 text-center py-3">
          <span>{{errorMessage}}</span>
        </div>
        <!-- Valid Response-->
        <div *ngIf="validResponse" class="row mx-0">
          <span>The administration will take 24h to transfer the
            crypto. Thank you to your trust</span>
        </div>
        <div class="row mx-0">
          <button class="btn btn-primary ml-auto" (click)="nextPage(3)">{{'CORE.Close'|translate}}</button>
        </div>
      </div>
    </div>
  </div>
</div>