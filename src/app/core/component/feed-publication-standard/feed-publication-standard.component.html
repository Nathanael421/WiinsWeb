<!-- Component Body -->
<div class="d-block">
  <div class="card bg-white">
    <!-- Header Card -->
    <div class="header w-100 row align-items-center mx-0 px-3">
      <div class="col-10 col-md-10 row mx-0 px-0">
        <div class="d-flex media col px-0">
          <div [routerLink]="[link]" class="avatar-owner">
            <img class="rounded-circle w-100 h-100" [src]="avatarPublication" alt="User">
          </div>
          <div class="avatar-owner" *ngFor="let p of taggedProfile" [routerLink]="'/profile/' + p._id">
            <img class="rounded-circle w-100 h-100" [src]="p.pictureprofile" alt="User">
          </div>
          <div class="description ms-2 m-auto">
            <div class="row">
              <p [routerLink]="[link]" class="owner-publication mb-0">{{name}}</p>
              <p class="mb-0 ms-2" *ngIf="publication?.group"> âžœ {{publication.group.name}}</p>
              <p class="mb-0 ms-2"
                *ngIf="publication.type !== 'VideoPublication' && publication.type !== 'PicturePublication' && publication.type !== 'PostPublication'">
                ({{'CORE.Sponsored'|translate}})
              </p>
            </div>
            <small><span>{{getDateCreation(publication.createdAt)}}</span></small>
          </div>
        </div>
      </div>
      <div class="col-2 col-md-2 mt-1">
        <div class="dropdown">
          <a class="dropdown-toggle" href="#" id="dropdownMenuLink" data-bs-toggle="dropdown" aria-expanded="false">
            <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" fill="currentColor" class="bi bi-three-dots text-white" viewBox="0 0 16 16">
              <path d="M3 9.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z"/>
            </svg>
          </a>
          <ul class="dropdown-menu" aria-labelledby="dropdownMenuLink">
            <li><a class="dropdown-item" href="#" (click)="delete(publication._id)" *ngIf="ownerId === (profile$|async)?._id || mypageId === true || mygroup == true">{{'BTN-DROPDOWN.Delete'|translate}}</a></li>
            <li><a class="dropdown-item" href="#" (click)="report(publication)">{{'BTN-DROPDOWN.Report'|translate}}</a></li>
          </ul>
        </div>
      </div>
    </div>
    <!-- Type of card -->
    <div [ngSwitch]="publication.type">
      <!-- Picture Mode -->
      <div *ngSwitchCase="'PicturePublication'" class="cardbox-item container-picture-publication h-100">
        <img (click)="openModal()" class="img-fluid clickModal img-picture-publication w-100 h-100 img-responsive" [src]="publication.file"
          alt="Image">
      </div>
      <!-- Video Mode -->
      <div *ngSwitchCase="'VideoPublication'" class="cardbox-item h-100">
        <div *ngIf="!playVideo" class="container-btn-play row mx-0 w-100 h-100" (click)="openModal()">
          <img (click)="startVideo()" class="btn-play m-auto h-100"
            src="https://eps-file-default.s3.eu-west-3.amazonaws.com/play-button.png">
        </div>
        <img *ngIf="!playVideo" class="img-fluid clickModal h-100" [src]="publication.poster">
        <div *ngIf="playVideo == true" class="zone-modal-video w-100" (click)="openModal()"></div>
        <video #video *ngIf="playVideo == true" class="clickModal w-100 h-100" controls
          controlsList="nodownload noremoteplayback" autoplay>
          <source [src]="publication.file" type="video/mp4">
        </video>
      </div>
      <!-- Post Mode -->
      <div *ngSwitchCase="'PostPublication'" class="cardbox-item h-100" [style.backgroundImage]="publication.background">
        <div (click)="openModal()" class="content-post-text clickModal">
          <div class="post-written d-flex">
            <div class="container">
              <div class="row">
                <span [ngClass]="[publication.hastags?.length > 0 ? 'pt-5 pb-3' : 'py-5']"
                  class="mx-auto my-auto px-2">{{publication.text}}</span>
              </div>
              <div class="row container-oneHastag px-4 py-2 float-right">
                <div class="oneHastag py-1 mx-1 my-1" (click)="redirectionToHastag(item)"
                  *ngFor="let item of publication.hastags">
                  <span class="col">#{{item}}</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- Info Stat -->
      <div class="cardbox-base d-flex align-items-center" [@buttonsState]="buttonsBefore">
        <div class="container">
          <div class="row row-cols-1" *ngIf="publication.hastags?.length > 0 || publication.text?.length > 0">
            <p class="text-center text-white cursor-pointer seeMore w-100 text-center" (click)="displayView()"><strong>See More</strong></p>
          </div>

          <div class="row" [@infoHoverState]="infoHoverBefore">
            <div class="mx-auto px-4 text-center">
              <span class="text-white">{{publication.text}}</span>
              <div class="comment_hashtag" [ngSwitch]="publication.hastags?.length">
                <div class="row row-cols-1" *ngSwitchCase="1">
                  <div class="itemHashtag" *ngFor="let item of publication.hastags">
                    <span class="pr-0">#{{item}}</span>
                  </div>
                </div>
                <div class="row row-cols-2" *ngSwitchCase="2">
                  <div class="itemHashtag" *ngFor="let item of publication.hastags">
                    <span class="pr-0">#{{item}}</span>
                  </div>
                </div>
                <div class="row row-cols-3" *ngSwitchCase="3">
                  <div class="itemHashtag" *ngFor="let item of publication.hastags">
                    <span class="pr-0">#{{item}}</span>
                  </div>
                </div>
                <div class="row row-cols-auto" *ngSwitchCase="publication.hastags?.length >= 4">
                  <div class="itemHashtag" *ngFor="let item of publication.hastags">
                    <span class="pr-0">#{{item}}</span>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="row w-100 mx-auto buttons">
            <div class="my-auto col-3 text-center">
              <a (click)="btnLike()">
                <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="btn-like text-white bi bi-suit-heart" *ngIf="!isLiked" viewBox="0 0 16 16">
                  <path d="m8 6.236-.894-1.789c-.222-.443-.607-1.08-1.152-1.595C5.418 2.345 4.776 2 4 2 2.324 2 1 3.326 1 4.92c0 1.211.554 2.066 1.868 3.37.337.334.721.695 1.146 1.093C5.122 10.423 6.5 11.717 8 13.447c1.5-1.73 2.878-3.024 3.986-4.064.425-.398.81-.76 1.146-1.093C14.446 6.986 15 6.131 15 4.92 15 3.326 13.676 2 12 2c-.777 0-1.418.345-1.954.852-.545.515-.93 1.152-1.152 1.595L8 6.236zm.392 8.292a.513.513 0 0 1-.784 0c-1.601-1.902-3.05-3.262-4.243-4.381C1.3 8.208 0 6.989 0 4.92 0 2.755 1.79 1 4 1c1.6 0 2.719 1.05 3.404 2.008.26.365.458.716.596.992a7.55 7.55 0 0 1 .596-.992C9.281 2.049 10.4 1 12 1c2.21 0 4 1.755 4 3.92 0 2.069-1.3 3.288-3.365 5.227-1.193 1.12-2.642 2.48-4.243 4.38z"/>
                </svg>
                <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="btn-liked text-danger bi bi-suit-heart-fill" *ngIf="isLiked" viewBox="0 0 16 16">
                  <path d="M4 1c2.21 0 4 1.755 4 3.92C8 2.755 9.79 1 12 1s4 1.755 4 3.92c0 3.263-3.234 4.414-7.608 9.608a.513.513 0 0 1-.784 0C3.234 9.334 0 8.183 0 4.92 0 2.755 1.79 1 4 1z"/>
                </svg>
              </a>
            </div>
            <div class="my-auto comment-share col-3 text-center">
              <a (click)="openModal()" class="clickModal cursor-pointer">
                <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="btn-comment text-white 25bi bi-chat" viewBox="0 0 16 16">
                  <path d="M2.678 11.894a1 1 0 0 1 .287.801 10.97 10.97 0 0 1-.398 2c1.395-.323 2.247-.697 2.634-.893a1 1 0 0 1 .71-.074A8.06 8.06 0 0 0 8 14c3.996 0 7-2.807 7-6 0-3.192-3.004-6-7-6S1 4.808 1 8c0 1.468.617 2.83 1.678 3.894zm-.493 3.905a21.682 21.682 0 0 1-.713.129c-.2.032-.352-.176-.273-.362a9.68 9.68 0 0 0 .244-.637l.003-.01c.248-.72.45-1.548.524-2.319C.743 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7-3.582 7-8 7a9.06 9.06 0 0 1-2.347-.306c-.52.263-1.639.742-3.468 1.105z"/>
                </svg>
              </a>
            </div>
            <div class="my-auto hashtag col-3 text-center">
              <a class="cursor-pointer">
                <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-hash text-white" viewBox="0 0 16 16">
                  <path d="M8.39 12.648a1.32 1.32 0 0 0-.015.18c0 .305.21.508.5.508.266 0 .492-.172.555-.477l.554-2.703h1.204c.421 0 .617-.234.617-.547 0-.312-.188-.53-.617-.53h-.985l.516-2.524h1.265c.43 0 .618-.227.618-.547 0-.313-.188-.524-.618-.524h-1.046l.476-2.304a1.06 1.06 0 0 0 .016-.164.51.51 0 0 0-.516-.516.54.54 0 0 0-.539.43l-.523 2.554H7.617l.477-2.304c.008-.04.015-.118.015-.164a.512.512 0 0 0-.523-.516.539.539 0 0 0-.531.43L6.53 5.484H5.414c-.43 0-.617.22-.617.532 0 .312.187.539.617.539h.906l-.515 2.523H4.609c-.421 0-.609.219-.609.531 0 .313.188.547.61.547h.976l-.516 2.492c-.008.04-.015.125-.015.18 0 .305.21.508.5.508.265 0 .492-.172.554-.477l.555-2.703h2.242l-.515 2.492zm-1-6.109h2.266l-.515 2.563H6.859l.532-2.563z"/>
                </svg>
              </a>
            </div>
            <div class="my-auto share col-3 text-center">
              <a class="cursor-pointer">
                <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-share text-white" viewBox="0 0 16 16">
                  <path d="M13.5 1a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zM11 2.5a2.5 2.5 0 1 1 .603 1.628l-6.718 3.12a2.499 2.499 0 0 1 0 1.504l6.718 3.12a2.5 2.5 0 1 1-.488.876l-6.718-3.12a2.5 2.5 0 1 1 0-3.256l6.718-3.12A2.5 2.5 0 0 1 11 2.5zm-8.5 4a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zm11 5.5a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3z"/>
                </svg>
              </a>
            </div>
          </div>
        </div>
      </div>

    <!-- Write a comment -->
    <!-- <div class="cardbox-comments p-2">
      <div class="new-comment">
        <div class="row mx-0 py-1">
          <div class="content-list-tag col-md-10 px-0"
            *ngIf="((spotSearch$|async) == 'feed-publication-standard' + publication._id ) && ((resultsProfile$ | async)?.length > 0)">
            <div class="container">
              <div class="row py-3 oneSuggest" *ngFor="let p of (resultsProfile$ | async)" (click)="addTag(p)">
                <div class="col-md-3 d-flex justify-content-center">
                  <img class="rounded-circle" [src]="p.pictureprofile">
                </div>
                <div class="col-md-9 my-auto px-0">
                  <span>
                    <p class="mb-0">{{p._meta.pseudo}}</p>
                  </span>
                </div>
              </div>
            </div>
          </div>
          <div class="col-10 col-md-10 my-auto content-input py-2" (keydown.enter)="sendComment(); false"
            (keydown)="writeComment($event)">
            <span #newComment class="postcomment" contenteditable="true" [innerHTML]="defaultComment"
              (focusin)='focusComment()'>
            </span>
          </div>
        </div>
      </div>
    </div> -->
  </div>
</div>